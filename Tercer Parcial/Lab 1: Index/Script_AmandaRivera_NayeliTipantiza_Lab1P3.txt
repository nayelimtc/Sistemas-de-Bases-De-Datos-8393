**CREAR BASE DE DATOS**
CREATE USER NAIESS2 IDENTIFIED BY oracle1717;
GRAN CONNECT, RESOURCE, DBA TO NAIESS;

**EDITAR tnsnames**
DB_IESSTR=
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = LAPTOP-8HNOQCQR)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = DB_IESSTR)
    )
  )

**CONECTAR BASE DE DATOS**
CONNECT NAIESS2@DB_IESSTR

**CREAR TABLAS**

CREATE TABLE TB_PERSONA(
	INT_ID_PERSONA INTEGER PRIMARY KEY,
	VAR_NOMBRE_PERSONA	 VARCHAR2(30),	
	VAR_TEL_PERSONA VARCHAR2(10),
	VAR_GENERO_PERSONA VARCHAR2(10),
	DT_FECHA_NAC_PERSONA DATE DEFAULT SYSDATE,
	VAR_CORREO_PERSONA VARCHAR2(20),
	VAR_DIRECCION_PERSONA VARCHAR2(80)
);
CREATE TABLE TB_HIJO(
	INT_ID_HIJO INTEGER PRIMARY KEY,
	VAR_NOMBRE_HIJO VARCHAR2(30),
	VAR_EDAD_HIJO INTEGER NOT NULL,
	INT_ID_PERSONA INTEGER NOT NULL,
    CONSTRAINT FK_PERSONA
	FOREIGN KEY (INT_ID_PERSONA) REFERENCES TB_PERSONA(INT_ID_PERSONA)
);
CREATE TABLE TB_AFILIACION(
	INT_ID_AFILIACION INTEGER PRIMARY KEY,
	VAR_NOMBRE_AFILIACION VARCHAR2(20),
	VAR_TIPO_AFILIACION VARCHAR2(20),
	VAR_ESTADO_AFILIACION VARCHAR2(10)
);
CREATE TABLE TB_BASELEGAL(
	INT_ID_BASELEGAL INTEGER PRIMARY KEY,
	VAR_DESCRIPCION_BASELEGAL VARCHAR2(50),
	VAR_DECRETO_BASELEGAL VARCHAR2(20),
	VAR_ESTADO_BASELEGAL VARCHAR2(10),
	INT_ID_AFILIACION INTEGER NOT NULL,
	CONSTRAINT FK_AFILIACION
	FOREIGN KEY (INT_ID_AFILIACION) REFERENCES TB_AFILIACION(INT_ID_AFILIACION)
);
CREATE TABLE TB_CODIGO(
	INT_ID_CODIGO INTEGER PRIMARY KEY,
	VAR_NOMBRE_CODIGO VARCHAR2(30),
	INT_ARTICULO INTEGER NOT NULL,
	VAR_ESTADO_CODIGO VARCHAR2(10),
	VAR_DETALLE_CODIGO VARCHAR2(30),
	INT_ID_BASELEGAL INTEGER NOT NULL,
	CONSTRAINT FK_BASELEGAL
	FOREIGN KEY (INT_ID_BASELEGAL) REFERENCES TB_BASELEGAL(INT_ID_BASELEGAL)
);
CREATE TABLE TB_APORTACION(
	INT_ID_APORTACION INTEGER PRIMARY KEY,
	DT_FECHA_APORTACION DATE DEFAULT SYSDATE,
	INT_NO_APORTACION INTEGER NOT NULL,
	VAR_DETALLE_APORTACION VARCHAR2(30),
	VAR_MONTO_APORTACION VARCHAR2(10)
);
CREATE TABLE TB_EMPRESA(
	INT_ID_EMPRESA INTEGER PRIMARY KEY,
	VAR_NOMBRE_EMPRESA VARCHAR2(40),
	VAR_DETALLE_EMPRESA VARCHAR2(40),
	VAR_DIRECCION_EMPRESA VARCHAR2(50),
	VAR_RESPONSABLE_EMPRESA VARCHAR2(30)
);
CREATE TABLE TB_USUARIO(
	INT_ID_USUARIO INTEGER PRIMARY KEY,
	VAR_NOMBRE_USUARIO VARCHAR2(20),
	VAR_CONTRASENIA_USUARIO VARCHAR2(50),
	INT_ID_PERSONA INTEGER NOT NULL,
    CONSTRAINT FK_ID_PERSONA
	FOREIGN KEY (INT_ID_PERSONA) REFERENCES TB_PERSONA(INT_ID_PERSONA)
);


CREATE TABLE TB_PERFIL(
	INT_ID_PERFIL INTEGER PRIMARY KEY,
	VAR_DESCRIPCION_PERFIL VARCHAR2(50),
	VAR_NOMBRE_PERFIL VARCHAR2(10),
	INT_ID_USUARIO INTEGER NOT NULL,
	CONSTRAINT FK_USUARIO
	FOREIGN KEY (INT_ID_USUARIO) REFERENCES TB_USUARIO(INT_ID_USUARIO)
);
CREATE TABLE TB_ROL(
	INT_COD_ROL INTEGER PRIMARY KEY,
	VAR_NOMBRE_ROL VARCHAR2(20),
	VAR_DETALLE_ROL VARCHAR2(20),
	INT_ID_PERFIL INTEGER NOT NULL,
	CONSTRAINT FK_PERFIL
	FOREIGN KEY (INT_ID_PERFIL) REFERENCES TB_PERFIL(INT_ID_PERFIL)
);
CREATE TABLE TB_TRABAJO( 
	INT_ID_TRABAJO INTEGER PRIMARY KEY,
	INT_ID_PERSONA INTEGER NOT NULL,
	INT_ID_EMPRESA INTEGER NOT NULL,
	INT_ID_APORTACION INTEGER NOT NULL,
	INT_ID_AFILIACION INTEGER NOT NULL,
	FOREIGN KEY (INT_ID_TRABAJO) REFERENCES TB_TRABAJO(INT_ID_TRABAJO),
	FOREIGN KEY (INT_ID_PERSONA) REFERENCES TB_PERSONA(INT_ID_PERSONA),
	FOREIGN KEY (INT_ID_EMPRESA) REFERENCES TB_EMPRESA(INT_ID_EMPRESA),
	FOREIGN KEY (INT_ID_APORTACION) REFERENCES TB_APORTACION(INT_ID_APORTACION),
	FOREIGN KEY (INT_ID_AFILIACION) REFERENCES TB_AFILIACION(INT_ID_AFILIACION)
);


**CREAR INDICES** 

CREATE UNIQUE INDEX IX_UNIQ_PERSONA
ON TB_PERSONA(VAR_CORREO_PERSONA);

CREATE UNIQUE INDEX IX_UNIQ_USUARIO
ON TB_USUARIO(VAR_NOMBRE_USUARIO);

CREATE UNIQUE INDEX IX_UNIQ_EMPRESA
ON TB_EMPRESA(VAR_NOMBRE_EMPRESA);

CREATE UNIQUE INDEX IX_UNIQ_BASELEGAL
ON TB_BASELEGAL(VAR_DESCRIPCION_BASELEGAL);

CREATE UNIQUE INDEX IX_UNIQ_CODIGO
ON TB_CODIGO(VAR_DETALLE_CODIGO);

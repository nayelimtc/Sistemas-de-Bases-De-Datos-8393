--PRIMERA VISTA--

--Crear una vista que liste todos los hijos que sean mayores de edad

--Creación de la Vista

CREATE VIEW vista_hijo_mayores AS
    SELECT
        var_nombre_hijo,
        int_edad_hijo
    FROM
        tb_hijo
    WHERE
        int_edad_hijo >= 18;

--Ejecución de la Vista

Select * from vista_hijo_mayores;

---SEGUNDA VISTA------

-Crear una vista que indique todos lo códigos inactivos y la base legal a la
-que pertenezcan

column var_id_baselegal format a35;
column var_descripcion_baselegal format a20;
column var_decreto_baselelgal format a20;
column var_estado_baselelgal format a20;
column var_id_afiliacion format a35;
set serveroutput on
set linesize 300

column var_id_codigo format a35;
column var_nombre_codigo format a20;
column int_articulo format a20;
column var_estado_codigo format a20;
column var_detalle_codigo format a20;
column var_id_baselegal format a35;
set serveroutput on
set linesize 300

--Creación de la vista


CREATE VIEW vista_codigo_inactivo AS
SELECT
    tb_codigo.var_nombre_codigo as "Codigo",
    tb_codigo.var_estado_codigo as "Estado del Codigo",
    tb_baselegal.var_decreto_baselegal as "Base Legal"
FROM
         tb_codigo
    INNER JOIN tb_baselegal ON tb_codigo.var_id_baselegal = tb_baselegal.var_id_baselegal
WHERE
    tb_codigo.var_estado_codigo = 'Inactivo';

--Ejecución de la Vista

Select * from vista_codigo_inactivo;

--TERCERA VISTA--
--Mostrar todas personas afiliadas que aporten de manera voluntaria

--Creación de la vista

CREATE VIEW vista_afiliado_voluntario AS
    SELECT
        tb_persona.var_nombre_persona as "Persona",
        tb_afiliacion.var_nombre_afiliacion as "Afiliación",
        tb_afiliacion.var_tipo_afiliacion as "Tipo Afiliacion"
    FROM
             tb_trabajo
        INNER JOIN tb_persona ON tb_trabajo.var_id_persona = tb_persona.var_id_persona
        INNER JOIN tb_afiliacion ON tb_trabajo.var_id_afiliacion = tb_afiliacion.var_id_afiliacion
    WHERE
            tb_afiliacion.var_nombre_afiliacion = 'Voluntario'
        AND tb_afiliacion.var_tipo_afiliacion = 'Afiliado';
    
--Ejecución de la Vista

SELECT
    *
FROM
    vista_afiliado_voluntario;

--CUARTA VISTA--
-Los usuarios que tengan un perfil creado hace 2 años

--Crear la vista


CREATE VIEW vista_usuario_perfil AS
    SELECT
        tb_usuario.var_nombre_usuario,
        tb_perfil.var_descripcion_perfil
    FROM
             tb_perfil
        INNER JOIN tb_usuario ON tb_perfil.var_id_usuario = tb_usuario.var_id_usuario
    WHERE
        tb_perfil.var_descripcion_perfil = 'Creado hace 2 aÃƒÂ±os';
    
--Ejecución de la Vista

SELECT
    *
FROM
    vista_usuario_perfil;


